<a [routerLink]='["c", result.card_id]' [queryParamsHandling]='"merge"'
   (mouseover)='hover.next(result)'
   [attr.aria-label]='"פתיחת עמוד השירות של " + result.service_name'
   class='branch' [class.collapsible]='collapsible'>
    <div class='branch-headers'>
        <ng-container *ngIf='result.branch_city && !result.national_service'>
            <ng-container *ngIf='result.organization_short_name'>
                <span class='org' [innerHTML]="_h(result, 'organization_short_name') + '&nbsp;/&nbsp;'"></span>
            </ng-container>
            <ng-container *ngIf='!result.organization_short_name'>
                <span class='org' [innerHTML]="_h(result, 'organization_name') + '&nbsp;/&nbsp;'"></span>
            </ng-container>
            <span class='city'>{{result.branch_city}}</span>
        </ng-container>
        <ng-container *ngIf='!result.branch_city'>
            <span class='org' [innerHTML]="_h(result, 'organization_name') + '&nbsp;/&nbsp;'"></span>
            <ng-container *ngIf='!result.national_service'>
                <span class='city'>{{result.branch_name}}</span>
            </ng-container>
            <ng-container *ngIf='result.national_service'>
                <span class='national-service'>שירות ארצי</span>
            </ng-container>
        </ng-container>
    </div>
    <div class='cards'>
        <app-result-card [card]='result' [small]='layout.mobile' [smallDesktop]='false' [searchParams]='searchParams'></app-result-card>
    </div>
</a>
<div class='bookends' *ngIf='collapsible'>
    <ng-container *ngFor='let extra of result.collapse_hits?.slice(1, showCount + 1) || []; let i = index;'>
        <a [routerLink]='["c", extra.card_id]' [queryParamsHandling]='"merge"'
           (mouseover)='hover.next(extra)' 
           [attr.aria-label]='"פתיחת עמוד השירות " + result.service_name + " של " + extra.organization_name + " ב" + extra.branch_address'
           class='bookend' [style.zIndex]='1000 - i'>
            <span class='org' *ngIf='showOrgs'>{{orgName(extra)}}</span>
            <span class='separator'>&nbsp;/&nbsp;</span>
            <span class='city'>{{extra.address_parts?.primary || extra.branch_address }}</span>
        </a>
    </ng-container>
    <a class='bookend more' *ngIf='moreAvailable > 0' (activated)='more()' role='button' aria-label='הצגת עוד 10 תוצאות דומות' clickOnReturn tabindex="0">+ {{moreAvailable}} שירותים דומים</a>
</div>
